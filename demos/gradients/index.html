<!DOCTYPE html>
<html lang="en">
<head>

<meta charset="UTF-8">
<title>Interpolation</title>
<link rel="stylesheet" href="https://get.mavo.io/mavo.css">
<link rel="stylesheet" href="style.css">

<script src="https://get.mavo.io/mavo.js"></script>
<script src="../../color.js" type="module"></script>

</head>
<body mv-app mv-mode="edit">

<div class="inputs">
	<label>
		Color 1: <input property id="colorStr1" value="lime" style="--color: [color1 & '']" />
	</label>

	<label>
		Color 2: <input property id="colorStr2" value="aqua" style="--color: [color2 & '']" />
	</label>

	<meta property="color1" content="[getColor(colorStr1)]">
	<meta property="color2" content="[getColor(colorStr2)]">
</div>

<div id="output">
	<article property="gradient" mv-multiple style="--steps:[stepsStr]">
		<details>
			<summary>
				<span property="space" mv-edit="#space" mv-default="lab"></span> interpolation,
				[if(numSteps, numSteps & " steps,")] [if (delta > 0, delta & " max Î”E,")]
				[count(step)] resulting steps
			</summary>
[space]
			<label>
				Interpolate in
			</label>

			<label>
				Steps: <input type="number" property="numSteps" value="10" min="2" />
			</label>

			<label>
				DeltaE: <input type="number" property="delta" value="" min="0" />
			</label>

			<div>
				Colors:

				<div mv-value="color1.steps(color2, group(steps: numSteps, delta: delta, space: space))" mv-multiple="step">
					[step & ""]
				</div>
			</div>

			<label>
				<textarea property="stepsStr">[join(step ', ')]</textarea>
			</label>
		</details>
	</article>
</div>

<div hidden>
	<select id="space">
		<option mv-value="ColorSpaces" mv-multiple="colorSpace" mv-group value="[colorSpace.id]">[colorSpace.name]</option>
	</select>
</div>
<script type="module">
	window.ColorSpaces = Object.values(Color.spaces).map(s => {
		return {id: s.id, name: s.name}
	});

	// Just to swallow errors
	window.getColor = function(str) {
		try {
			return new Color(str);
		}
		catch (e) {
			if (e instanceof TypeError) {
				return null;
			}

			throw e;
		}
	}
</script>
</body>
</html>
